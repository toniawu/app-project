(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"42bd":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o}));var o={unicloudDb:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/@dcloudio/uni-cli-shared/components/unicloud-db")]).then(n.bind(null,"3220"))}},i=function(){var e=this.$createElement,t=(this._self._c,this.$hasSSP("1da55560-1")),n=t?this.$getSSP("1da55560-1","default")["loading"]||this.$getSSP("1da55560-1","default")["data"].length:null;this.$mp.data=Object.assign({},{$root:{m0:t,m1:n}})},s=[]},"603a":function(e,t,n){"use strict";(function(e,t){var o=n("47a9");n("add7"),n("861b");o(n("3240"));var i=o(n("6f66"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"6f66":function(e,t,n){"use strict";n.r(t);var o=n("42bd"),i=n("6fed");for(var s in i)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(s);n("a2b5");var a=n("828b"),c=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,"0c0c00bc",null,!1,o["a"],void 0);t["default"]=c.exports},"6fed":function(e,t,n){"use strict";n.r(t);var o=n("ade6"),i=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=i.a},a2b5:function(e,t,n){"use strict";var o=n("f982"),i=n.n(o);i.a},ade6:function(e,t,n){"use strict";(function(e,o,i){var s=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s(n("af34")),c=s(n("7ca3"));n("ea1e");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{quan:0,videobool:0,wen_id:"",showMask:!1,showPopup:!1,current:0,hasLogin:!1,bannerList:[],videoList:[],selectedVideos:[]}},onShow:function(){this.hasLogin=e.getCurrentUserInfo().tokenExpired>Date.now(),console.log(e.getCurrentUserInfo())},onLoad:function(){this.videoOff(),this.getBanner(),this.getVideos(),this.getWenId()},methods:{videoOff:function(){var e=this;o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/banner/videoOff"}).then((function(t){e.videobool=t[1].data,e.quan=1}))},getShow:function(){this.getBanner()},requestSubscribeMessage:function(){o.requestSubscribeMessage({tmplIds:["M5t4KOuKxEh_w8bkDY40MrEc2LZKNLC5md4U_wCmRRg","ejc2fjY4BZ7JqDuYV4rW4x2byGybZhCw009N4d7AhW4","7_tDJv2IAYHG3xE-qp54HqZDPQMvjMDMGTBYesSbqrI"],success:function(e){}})},sendPushMessage:function(){o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/banner/pushMessage"}).then((function(e){}))},showPopup1:function(){this.showMask=!0,this.showPopup=!0},hidePopup1:function(){this.showMask=!1,this.showPopup=!1},sub:function(){var e=this,t=o.getStorageSync("uni-id-pages-userInfo"),n=t._id;o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/banner/setWenId",method:"POST",data:{uid:n,wen_id:this.wen_id},success:function(t){e.showMask=!1,e.showPopup=!1}})},getWenId:function(){var t=this,n=(o.getStorageSync("uni-id-pages-userInfo"),e.getCurrentUserInfo().uid);console.log("用户编号",n),o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/banner/getWenId",method:"POST",data:{uid:n},success:function(e){console.log("获取问卷数据",e);var n=e.data.data[0];""!=n&&("wen_id"in n?""==n.wen_id&&(t.showMask=!0,t.showPopup=!0):(t.showMask=!0,t.showPopup=!0,console.log("首页弹框:"+t.showMask)))}})},setMessage:function(){o.requestSubscribeMessage({tmplIds:["zak3TIfuFoj--GetvpFyQoAG7fTXANFqHmqAA8gydcc"],success:function(e){console.log(e)}}),console.log(2222)},wxLogin:function(){var e=this;i.login({provider:"weixin",success:function(t){console.log("微信登录成功",t),e.hasLogin=!0},fail:function(e){console.log("微信登录失败",e)}})},getBanner:function(){var e=this;o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/banner/getBanner"}).then((function(t){console.log("banner数据是:",t[1].data.data),e.bannerList=t[1].data.data,console.log(e.bannerList)}))},getVideos:function(){var t=this,n=(o.getStorageSync("uni-id-pages-userInfo"),e.getCurrentUserInfo().uid);o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/push/getSurveysId",method:"POST",data:{uid:n},success:function(e){""!=e.data&&o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/push/getAllVideoList",method:"GET",data:{category_id:e.data},success:function(e){var n;console.log("ss",e);var o=e.data.data,i=[];o.forEach((function(e){e.start_score||i.push(e)}));var s=i.map((function(e){var t=r(r({},e),{},{url:e.videofile.url});return delete t.videofile,t}));(n=t.videoList).unshift.apply(n,(0,a.default)(s)),t.selectRandomVideos()}})}})},selectRandomVideos:function(){var e=Math.min(this.videoList.length,4);this.selectedVideos=this.videoList.sort((function(){return.5-Math.random()})).slice(0,e)},created:function(){this.getAllVideo()},goList:function(){console.log("去消息通知列表"),o.switchTab({url:"/pages/list/list"})},goQuestion:function(){o.navigateTo({url:"/pages/questionsList/questionsList"})},goVideoDetail:function(e,t){console.log("Navigating to video detail: ".concat(e,", ").concat(t)),o.navigateTo({url:"/pages/list/detail?id=".concat(e,"&title=").concat(t)})},change:function(e){o.showToast({title:this.$t("grid.clickTip")+" "+"".concat(e.detail.index+1)+" "+this.$t("grid.clickTipGrid"),icon:"none"})},onqueryload:function(e){},changeSwiper:function(e){this.current=e.detail.current},clickBannerItem:function(e){e.open_url&&o.navigateTo({url:"/uni_modules/uni-id-pages/pages/common/webview/webview?url="+e.open_url+"&title="+e.title,success:function(e){},fail:function(){},complete:function(){}})}}};t.default=d}).call(this,n("861b")["default"],n("df3c")["default"],n("3223")["default"])},f982:function(e,t,n){}},[["603a","common/runtime","common/vendor"]]]);