(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/list/list"],{"29a7":function(e,t,n){"use strict";n.r(t);var o=n("6afc"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},"3a36":function(e,t,n){"use strict";var o=n("95a6"),i=n.n(o);i.a},"467e":function(e,t,n){},"5ae0":function(e,t,n){"use strict";(function(e,t){var o=n("47a9");n("add7"),n("861b");o(n("3240"));var i=o(n("af43"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"6afc":function(e,t,n){"use strict";(function(e,o){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=i(n("7eb4")),s=i(n("af34")),u=i(n("7ca3")),c=i(n("ee10")),l=i(n("eb98"));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=new l.default,p=e.database(),g={onLoad:function(){this.videoOff(),this.score=o.getStorageSync("score"),console.log("分数："+this.score),this.getNewVideoList(),this.newlist()},components:{statusBar:function(){n.e("uni_modules/uni-nav-bar/components/uni-nav-bar/uni-status-bar").then(function(){return resolve(n("60f6"))}.bind(null,n)).catch(n.oe)}},computed:{inputPlaceholder:function(e){return"en"==o.getStorageSync("CURRENT_LANG")?"Please enter the search content":"请输入搜索内容"},colList:function(){return[p.collection("opendb-news-articles").where(this.where).field("avatar,title,last_modify_date,user_id").getTemp(),p.collection("uni-id-users").field("_id,nickname").getTemp()]}},data:function(){return{newslist:[],quan:0,videobool:2,score:0,where:'"article_status" == 1',keyword:"",showRefresh:!1,listHight:0,videoList:[]}},watch:{keyword:function(e,t){var n='"article_status" == 1 ';this.where=e?n+"&& /".concat(e,"/.test(title)"):n}},onReady:function(){var e=this;return(0,c.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.listHight="auto",a=e.$refs.udb;case 2:case"end":return t.stop()}}),t)})))()},onShow:function(){var e=this;return(0,c.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.keyword=getApp().globalData.searchText,getApp().globalData.searchText="",t.next=4,h.getLocation({geocode:!0});case 4:t.sent;case 5:case"end":return t.stop()}}),t)})))()},methods:{fns:function(e){o.navigateTo({url:"/pages/list/detail?new="+e})},newlist:function(){var e=this;o.request({url:"https://www.hhkstlyq.com/api/index/news?type=tzgg&page=1&pagesize=10"}).then((function(t){e.newslist=t[1].data.data.data}))},videoOff:function(){var e=this;o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/banner/videoOff"}).then((function(t){e.videobool=t[1].data,e.quan=1}))},sendPushMessage:function(){var e=o.getStorageSync("uni-id-pages-userInfo"),t=e._id;console.log(t),o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/banner/pushMessage",method:"POST",data:{uid:t}}).then((function(e){}))},getAllVideo:function(){var e=this,t=o.getStorageSync("uni-id-pages-userInfo"),n=t._id;console.log(n),o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/push/getSurveysId",method:"POST",data:{uid:n},success:function(t){console.log("111",t),""!=t.data&&o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/push/getAllVideoList",method:"GET",data:{uid:n,category_id:t.data},success:function(t){var n,o=t.data.data,i=[];o.forEach((function(e){if(e.start_score||i.push(e),0!=e.number)e.number,e.count}));var a=i.map((function(e){var t=d(d({},e),{},{url:e.videofile.url});return delete t.videofile,t}));e.videoList=[],(n=e.videoList).unshift.apply(n,(0,s.default)(a))}})}})},getNewVideoList:function(){var e=this,t=o.getStorageSync("uni-id-pages-userInfo"),n=t._id;o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/push/processPush",method:"GET",data:{id:n},success:function(t){console.log("data",t.data.data);var n=t.data.data;if(0!=n.length){var o=n.map((function(e){var t=d(d({},e),{},{url:e.videofile.url});return delete t.videofile,t}));console.log("newdata",o),e.videoList=o}}})},getPushMsg:function(){var e=this;console.log("获取视频列表"),o.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/push/pushVideo",method:"GET",success:function(t){console.log("1",t);var n=t.data.data;if(0!=n.length){var o=n.map((function(e){var t=d(d({},e),{},{url:e.videofile.url});return delete t.videofile,t}));console.log("规则推送视频列表："+JSON.stringify(o)),e.videoList.unshift(o[0]),console.log("视频列表："+JSON.stringify(e.videoList))}}})},videoPlay:function(){console.log("视频开始播放")},videoPause:function(){console.log("视频暂停播放")},videoEnded:function(){console.log("视频播放完毕")},videoVolumeChange:function(e){console.log("音量改变："+e.detail.value)},getScore:function(){this.score=o.getStorageSync("score"),console.log("分数："+this.score),this.addList(this.score)},searchClick:function(e){o.hideKeyboard(),o.navigateTo({url:"/pages/list/search/search",animationType:"fade-in"})},retry:function(){this.refresh()},refresh:function(){a.loadData({clear:!0},(function(){o.stopPullDownRefresh(),console.log("end")})),console.log("refresh")},loadMore:function(){a.loadMore()},onqueryerror:function(e){console.error(e)},onpullingdown:function(e){console.log(e),this.showRefresh=!0,e.pullingDistance>100&&this.refresh()}},onPullDownRefresh:function(){this.refresh()},onReachBottom:function(){this.loadMore()}};t.default=g}).call(this,n("861b")["default"],n("df3c")["default"])},"95a6":function(e,t,n){},af43:function(e,t,n){"use strict";n.r(t);var o=n("b761"),i=n("29a7");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("f852"),n("3a36");var r=n("828b"),s=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"4ab23aae",null,!1,o["a"],void 0);t["default"]=s.exports},b761:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={unicloudDb:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/@dcloudio/uni-cli-shared/components/unicloud-db")]).then(n.bind(null,"3220"))},uniList:function(){return n.e("uni_modules/uni-list/components/uni-list/uni-list").then(n.bind(null,"f782"))},uniListItem:function(){return n.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(n.bind(null,"215b"))},uniDateformat:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat")]).then(n.bind(null,"e7fb"))},uniLoadState:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-load-state/uni-load-state")]).then(n.bind(null,"1e4a"))}},i=function(){var e=this.$createElement,t=(this._self._c,this.$hasSSP("2e637200-2")),n=t?{data:this.$getSSP("2e637200-2","default")["data"],pagination:this.$getSSP("2e637200-2","default")["pagination"],hasMore:this.$getSSP("2e637200-2","default")["hasMore"],loading:this.$getSSP("2e637200-2","default")["loading"],error:this.$getSSP("2e637200-2","default")["error"]}:null;this.$mp.data=Object.assign({},{$root:{m0:t,a0:n}})},a=[]},f852:function(e,t,n){"use strict";var o=n("467e"),i=n.n(o);i.a}},[["5ae0","common/runtime","common/vendor"]]]);