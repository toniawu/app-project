(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/questionsList/questionsDetail/questionsDetail"],{4423:function(t,e,n){},"4c5e":function(t,e,n){"use strict";n.r(e);var i=n("7bf9"),s=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=s.a},"760a":function(t,e,n){"use strict";n.r(e);var i=n("f10e"),s=n("4c5e");for(var a in s)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(a);n("8235");var o=n("828b"),r=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=r.exports},"7bf9":function(t,e,n){"use strict";(function(t){var i=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(n("7ca3"));function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var o={data:function(){return{dataObj:{pkId:"1",title:"问卷调查",desc:"描述：最新问卷调查",number:23,questions:[{questionId:"1",questionType:"MULTY",title:"这是一个多选题？",children:[{id:"111",state:0,serial:"A",content:"多选第一个选项"},{id:"222",state:0,serial:"B",content:"多选第二个选项"},{id:"333",state:0,serial:"C",content:"多选第三个选项"},{id:"444",state:0,serial:"D",content:"多选第四个选项"},{id:"444",state:0,serial:"D",content:"多选第四个选项"},{id:"444",state:0,serial:"D",content:"多选第四个选项"},{id:"444",state:0,serial:"D",content:"多选第四个选项"},{id:"444",state:0,serial:"D",content:"多选第四个选项"},{id:"444",state:0,serial:"D",content:"多选第四个选项"}]},{questionId:"2",questionType:"MULTY",title:"这是一个多选题？",children:[{id:"111",state:0,serial:"A",content:"多选第一个选项"},{id:"222",state:0,serial:"B",content:"多选第二个选项"},{id:"333",state:0,serial:"C",content:"多选第三个选项"},{id:"444",state:0,serial:"D",content:"多选第四个选项"}]},{questionId:"3",questionType:"MULTY",title:"这是一个多选题？",children:[{id:"111",state:0,serial:"A",content:"多选第一个选项"},{id:"222",state:0,serial:"B",content:"多选第二个选项"},{id:"333",state:0,serial:"C",content:"多选第三个选项"},{id:"444",state:0,serial:"D",content:"多选第四个选项"}]},{questionId:"4",questionType:"SINGLE",title:"这是一个单选题？",children:[{id:"A",state:0,serial:"A",content:"单选第一个选项"},{id:"B",state:0,serial:"B",content:"单选第二个选项"},{id:"C",state:0,serial:"C",content:"单选第三个选项"},{id:"D",state:0,serial:"D",content:"单选第四个选项"},{id:"E",state:0,serial:"E",content:"单选第五个选项"}]},{questionId:"5",questionType:"SINGLE",title:"这是一个单选题？",children:[{id:"A",state:0,serial:"A",content:"单选第一个选项"},{id:"B",state:0,serial:"B",content:"单选第二个选项"},{id:"C",state:0,serial:"C",content:"单选第三个选项"},{id:"D",state:0,serial:"D",content:"单选第四个选项"},{id:"E",state:0,serial:"E",content:"单选第五个选项"}]},{questionId:"6",questionType:"SINGLE",title:"这是一个单选题？",children:[{id:"A",state:0,serial:"A",content:"单选第一个选项"},{id:"B",state:0,serial:"B",content:"单选第二个选项"},{id:"C",state:0,serial:"C",content:"单选第三个选项"},{id:"D",state:0,serial:"D",content:"单选第四个选项"},{id:"E",state:0,serial:"E",content:"单选第五个选项"}]}]},dataObj2:{pkId:"",title:"",desc:"",number:23,questions:[]}}},onLoad:function(t){this.dataObj2.pkId=t.id,this.dataObj2.title=t.title,this.dataObj2.desc=t.desc,this.getQuestionsDetail()},methods:{dealData:function(){var t=this;this.dataObj2.questions.map((function(e){var n={questionId:e._id,questionType:e.type,title:e.title,children:[]};t.dataObj2.questions.unshift(n)}));var e=this.dataObj2;(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){(0,s.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}})({},e);function n(t){return t.startsWith("options")}var i=e.questions.splice(1)[0];for(var o in i){var r={questionId:i[o]._id,questionType:i[o].type,title:i[o].title,children:[]};for(var c in this.dataObj2.questions.unshift(r),i[o])if(n(c)){var u={id:i[o][c]._id,state:i[o][c].state,serial:i[o][c].serial,content:i[o][c].content};void 0!==u.id&&this.dataObj2.questions[0].children.push(u),delete i[o][c]}}this.dataObj2.questions.pop(),this.dataObj2.number=this.dataObj2.questions.length,this.init(this.dataObj2)},init:function(t){this.$refs.liuCleanTime.initObj(t)},getQuestions:function(){var e=this;t.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/questions/getSurveys",success:function(t){e.questionsList=t.data.data,console.log("问卷列表："+JSON.stringify(e.questionsList))}})},getQuestionsDetail:function(){var e=this;t.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/questions/getSurveysDetail",method:"POST",data:{id:this.dataObj2.pkId},success:function(t){e.dataObj2.questions.push(t.data.data[0]),e.dealData(),e.dataObj2.questions.reverse()},fail:function(t){console.log("请求失败："+JSON.stringify(t))}})},submit:function(e){var n=0,i=0,s=[],a=e.phone;e.userAnswerList.forEach((function(t){if(console.log("res:"+JSON.stringify(e.userAnswerList)),t.userAnswer){var a=t.userAnswer;if("SINGLE"==t.questionType){"A"==a&&(i+=1),"B"==a&&(i+=2),"C"==a&&(i+=3),"D"==a&&(i+=4),"E"==a&&(i+=5),n+=i;var o={questionId:t.questionId,score1:i};s.push(o),i=0}}})),t.setStorageSync("score",n);var o=t.getStorageSync("uni-id-pages-userInfo");o=JSON.stringify(o);var r=JSON.parse(o)._id,c=(JSON.parse(o).username,JSON.parse(o).nickname),u=JSON.stringify(e.userAnswerList),d=e.pkId;console.log(d);var l=new Date;l=l.getTime(),console.log("当前时间："+l),t.request({url:"https://fc-mp-f02adfe0-c2b7-4979-95b9-97f95913e417.next.bspapp.com/score/add",method:"POST",data:{uid:r,nickname:c,score:n,scoreList:s,answerList:u,answerTime:l,surveysId:d,phone:a},success:function(t){console.log("提交成功："+JSON.stringify(t))},fail:function(t){console.log("提交失败："+JSON.stringify(t))}}),t.showToast({title:"问卷得分："+n,icon:"success",duration:2e3})}}};e.default=o}).call(this,n("df3c")["default"])},8235:function(t,e,n){"use strict";var i=n("4423"),s=n.n(i);s.a},bb87:function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("add7"),n("861b");i(n("3240"));var s=i(n("760a"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(s.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},f10e:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={liuCleanTime:function(){return n.e("uni_modules/liu-clean-time/components/liu-clean-time/liu-clean-time").then(n.bind(null,"a711"))}},s=function(){var t=this.$createElement;this._self._c},a=[]}},[["bb87","common/runtime","common/vendor"]]]);