require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-id-pages/pages/userinfo/realname-verify/realname-verify"],{"0d73":function(e,n,t){"use strict";t.r(n);var i=t("3ebd"),r=t("6292");for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);t("a4da");var u=t("828b"),o=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);n["default"]=o.exports},"246c":function(e,n,t){"use strict";(function(e,i){var r=t("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(t("b7d4")),u=r(t("7eb4")),o=r(t("ee10")),s=(r(t("8831")),r(t("57f8"))),f=t("ea1e"),c=["errCode"],d=e.importObject("uni-id-co"),l={mixins:[s.default],data:function(){return{realName:"",idCard:"",certifyId:"",verifyFail:!1,verifyFailCode:0,verifyFailTitle:"",verifyFailContent:""}},computed:{userInfo:function(){return f.store.userInfo},certifyIdNext:function(){return Boolean(this.realName)&&Boolean(this.idCard)&&this.needAgreements&&this.agree},isCertify:function(){return this.userInfo.realNameAuth&&2===this.userInfo.realNameAuth.authStatus},isDev:function(){return!1}},onLoad:function(){var e=i.getStorageSync("uni-id-pages-temp-frv");e&&(this.realName=e.realName,this.idCard=e.idCard)},methods:{getCertifyId:function(){var e=this;return(0,o.default)(u.default.mark((function n(){var t,r;return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.certifyIdNext){n.next=2;break}return n.abrupt("return");case 2:return n.abrupt("return",i.showModal({content:"暂不支持实名认证",showCancel:!1}));case 6:if(!("string"!==typeof e.realName||e.realName.length<2)&&/^[\u4e00-\u9fa5]{1,10}(·?[\u4e00-\u9fa5]{1,10}){0,5}$/.test(e.realName)){n.next=9;break}return i.showToast({title:"姓名只能是汉字",icon:"none"}),n.abrupt("return");case 9:return i.setStorage({key:"uni-id-pages-temp-frv",data:{realName:e.realName,idCard:e.idCard}}),t=i.getFacialRecognitionMetaInfo(),n.next=13,d.getFrvCertifyId({realName:e.realName,idCard:e.idCard,metaInfo:t});case 13:r=n.sent,e.certifyId=r.certifyId,e.startFacialRecognitionVerify();case 16:case"end":return n.stop()}}),n)})))()},startFacialRecognitionVerify:function(){},getFrvAuthResult:function(){var n=this;return(0,o.default)(u.default.mark((function t(){var r,o,s;return u.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.importObject("uni-id-co",{customUI:!0}),t.prev=1,i.showLoading({title:"验证中...",mask:!1}),t.next=5,r.getFrvAuthResult({certifyId:n.certifyId});case 5:o=t.sent,o.errCode,s=(0,a.default)(o,c),n.verifyFailContent&&console.log("[frv-debug] 客户端刷脸失败，由实人认证服务查询具体原因，原因：".concat(n.verifyFailContent)),i.showModal({content:"实名认证成功",showCancel:!1,success:function(){f.mutations.setUserInfo({realNameAuth:s}),n.verifyFail=!1}}),i.removeStorage({key:"uni-id-pages-temp-frv"}),t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](1),n.verifyFail=!0,n.verifyFailTitle=t.t0.errMsg,console.error(JSON.stringify(t.t0));case 17:return t.prev=17,i.hideLoading(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,12,17,20]])})))()},retry:function(){10013!==this.verifyFailCode?this.getCertifyId():this.verifyFail=!1}}};n.default=l}).call(this,t("861b")["default"],t("df3c")["default"])},"3ebd":function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return i}));var i={uniList:function(){return t.e("uni_modules/uni-list/components/uni-list/uni-list").then(t.bind(null,"f782"))},uniListItem:function(){return t.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(t.bind(null,"215b"))},uniForms:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(t.bind(null,"be2b"))},uniFormsItem:function(){return t.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(t.bind(null,"75b1"))},uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,"e50f"))},uniIdPagesAgreements:function(){return t.e("uni_modules/uni-id-pages/components/uni-id-pages-agreements/uni-id-pages-agreements").then(t.bind(null,"3677"))}},r=function(){var e=this.$createElement;this._self._c},a=[]},"59da":function(e,n,t){},6292:function(e,n,t){"use strict";t.r(n);var i=t("246c"),r=t.n(i);for(var a in i)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(a);n["default"]=r.a},a4da:function(e,n,t){"use strict";var i=t("59da"),r=t.n(i);r.a},dbf3:function(e,n,t){"use strict";(function(e,n){var i=t("47a9");t("add7"),t("861b");i(t("3240"));var r=i(t("0d73"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])}},[["dbf3","common/runtime","common/vendor","uni_modules/uni-id-pages/pages/common/vendor"]]]);